<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewpory" content="width=device-width, inital-scale=1"/>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script>
	//ajax는 비동기식으로 웹서버와 통신을 할수 있는 자바스크립트 라이브러리이다.
	//ajax를 사용하면 비동기식으로 웹서버에 데이터를 보내거나 받을 수 있다.
	function loadDom(){
		//서버에 있는 abcde.txt파일의 내용을 비동기식으로 전송받아 #result의 내용을 변경한다.
		//ajax처리를 자바스크립트 내장 객체 : XMLHttpRequest
		//1. 객체 생성
		var xhttp = new XMLHttpRequest();//웹서베에 데이터를 요청하는 객체
		//2. 서버에서 전송받을 경우 실행한 기능 구현
		xhttp.onreadystatechange = function(){
			//전송받은 정보를 처리하기 위한 구현
			// readyState : XMLHttpRequest의 처리 상태 가지고 있음
			//				0:초기화실패, 1:서버연결, 2:요청이 접수, 3:처리요청, 4:요청이 완료
			// status : 요청처리 상태 번호를 반환
			//			(200:정상처리, 403:금지, 404:찾을 수 없음)
			// statusText : 'OK', 'Not Found'
			// responseText : 실행결과값 - 서버에서 전송받은 내용이 있는 변수
			if(this.readyState == 4 && this.status==200){//정상전송이 된경우
				document.getElementById("result").innerHTML = this.responseText;
			}
		}
		//3. 객체 열기
		//	전송방식:post,get  가져올 데이터파일, 동기식(false) or 비동기식(true)
		xhttp.open("GET",	"abcde.txt", true);
		//4. 객체 보냄 : 실제 실행됨(2)
		xhttp.send();//서버에 요청 보냄.
	}
	
</script>

</head>
<body>
<div id="result">
	<h1>자바스크립트를 이용한 Ajax 테스트</h1>
	<button onclick="loadDom()">클릭하면 서버에서 데이터를 비동기식으로 가져옴</button>
</div>
<img src="../img/img1.png"/>
</body>
</html>